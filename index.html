<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Egzamin Linux - Pełna Baza (80 pytań)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .quiz-container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 650px;
            padding: 30px;
            text-align: center;
            display: none;
        }
        #menu-screen { display: block; }
        
        h1 { color: #333; font-size: 24px; margin-bottom: 20px; }
        h2 { color: #555; font-size: 18px; margin-bottom: 30px; }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .menu-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .menu-btn:hover { background-color: #0056b3; }
        .menu-btn small { margin-top: 5px; opacity: 0.8; font-size: 11px; }
        .menu-btn.full-width { grid-column: span 2; background-color: #28a745; font-size: 16px; font-weight: bold; }
        .menu-btn.full-width:hover { background-color: #218838; }

        .category-tag {
            display: inline-block;
            background: #e1f5fe;
            color: #0288d1;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 20px;
            text-transform: uppercase;
        }
        .question-text {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 25px;
            font-weight: 600;
        }
        .options { display: flex; flex-direction: column; gap: 10px; }
        .option-btn {
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            color: #495057;
        }
        .option-btn:hover:not([disabled]) {
            background-color: #e2e6ea;
            border-color: #adb5bd;
        }
        .option-btn.correct {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        .option-btn.wrong {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        .footer {
            margin-top: 25px;
            font-size: 14px;
            color: #6c757d;
            display: flex;
            justify-content: space-between;
        }
        #next-btn, #restart-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            display: none;
            margin-top: 20px;
            margin-left: auto;
            margin-right: auto;
        }
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: #007bff;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            font-weight: bold;
            margin: 20px auto;
        }
    </style>
</head>
<body>

<div class="quiz-container" id="menu-screen">
    <h1>Egzamin: Administracja Systemami</h1>
    <h2>Wybierz dział do nauki</h2>
    <div class="menu-grid">
        <button class="menu-btn" onclick="startQuiz(0, 15)">Część 1<br><small>Komendy, Użytkownicy, Skrypty</small></button>
        <button class="menu-btn" onclick="startQuiz(15, 30)">Część 2<br><small>Pakiety, Zasoby, Logi</small></button>
        <button class="menu-btn" onclick="startQuiz(30, 45)">Część 3<br><small>Sieć, Nmap, SSH</small></button>
        <button class="menu-btn" onclick="startQuiz(45, 60)">Część 4<br><small>Bezpieczeństwo, FTP, Apache</small></button>
        <button class="menu-btn" onclick="startQuiz(60, 80)" style="background-color: #6f42c1; color: white;">Część 5 (HARD)<br><small>Detale, Flagi, Sprzęt</small></button>
        <button class="menu-btn full-width" onclick="startQuiz(0, 80)">PEŁNY EGZAMIN (80 pytań)</button>
    </div>
</div>

<div class="quiz-container" id="quiz-screen">
    <div class="category-tag" id="category">Kategoria</div>
    <h2 class="question-text" id="question">Pytanie</h2>
    
    <div class="options" id="options-container"></div>

    <button id="next-btn" onclick="nextQuestion()">Następne pytanie</button>

    <div class="footer">
        <span id="progress">Pytanie 1/20</span>
        <span id="score">Punkty: 0</span>
    </div>
</div>

<div class="quiz-container" id="result-screen">
    <h1>Koniec Quizu!</h1>
    <p>Twój wynik:</p>
    <div class="score-circle" id="final-score">0%</div>
    <p id="score-text"></p>
    <button id="restart-btn" style="display:inline-block" onclick="showMenu()">Wróć do Menu</button>
</div>

<script>
    // BAZA PYTAŃ LINUX (Poprawiona i zweryfikowana)
    const allQuestions = [
        // --- CZĘŚĆ 1: Komendy, Użytkownicy, Skrypty ---
        { c: "Komendy su/sudo", q: "Jaka jest główna różnica między 'su' a 'su -'?", a: "'su -' zmienia również zmienne środowiskowe (np. PATH)", w: ["'su' wymaga hasła użytkownika, a 'su -' hasła roota", "'su -' uruchamia powłokę w trybie graficznym", "'su' to alias do sudo, a 'su -' to pełne logowanie"] },
        { c: "Komendy su/sudo", q: "Jakie polecenie pozwala wykonać jedną komendę jako root używając własnego hasła?", a: "sudo", w: ["su root -c", "admin", "runas"] },
        { c: "Zarządzanie kontami", q: "W jakim pliku znajdują się zakodowane hasła użytkowników?", a: "/etc/shadow", w: ["/etc/passwd", "/etc/security/opasswd", "/var/lib/passwords"] },
        { c: "Zarządzanie kontami", q: "Komenda do modyfikacji parametrów starzenia hasła to:", a: "chage", w: ["passwd --expire", "usermod -age", "chexpire"] },
        { c: "Zarządzanie kontami", q: "Co zawiera plik /etc/passwd?", a: "Podstawowe informacje o kontach (login, UID, GID, shell)", w: ["Zakodowane hasła wszystkich użytkowników", "Listę uprawnień sudo dla grup", "Historię ostatnich logowań"] },
        { c: "Zarządzanie kontami", q: "Która komenda usuwa użytkownika?", a: "userdel", w: ["rmuser", "deluser", "erase-user"] },
        { c: "Skrypty powłoki", q: "Jak nazywa się linia rozpoczynająca skrypt (np. #!/bin/bash)?", a: "Shebang", w: ["Hashbash", "Header", "Pragma"] },
        { c: "Skrypty powłoki", q: "Jakie uprawnienie musi mieć plik skryptu, aby go uruchomić?", a: "Wykonywania (chmod +x)", w: ["Zapisu (chmod +w)", "SetUID (chmod +s)", "Odczytu (chmod +r)"] },
        { c: "Skrypty powłoki", q: "Gdzie najlepiej umieszczać prywatne skrypty użytkownika?", a: "~/bin", w: ["/usr/local/bin", "/etc/scripts", "/var/bin"] },
        { c: "Skrypty powłoki", q: "Co oznacza zmienna $1 w skrypcie?", a: "Pierwszy argument przekazany do skryptu", w: ["Nazwę wykonywanego skryptu", "ID procesu (PID)", "Kod wyjścia ostatniej komendy"] },
        { c: "Zarządzanie kontami", q: "Do czego służy komenda groupadd?", a: "Do tworzenia nowej grupy", w: ["Do dodawania użytkownika do istniejącej grupy", "Do zmiany nazwy grupy", "Do listowania wszystkich grup"] },
        { c: "Komendy su/sudo", q: "Jaką grupę często dodaje się do sudoers, aby miała pełne uprawnienia?", a: "wheel", w: ["root", "admin", "sudo-users"] },
        { c: "Skrypty powłoki", q: "Co robił skrypt 'delu' z wykładu?", a: "Usuwał użytkownika wraz z plikami tymczasowymi i pocztą", w: ["Tylko blokował konto użytkownika", "Usuwał jedynie wpis w /etc/passwd", "Tworzył archiwum plików użytkownika"] },
        { c: "Komendy su/sudo", q: "Czy su [użytkownik] wymaga hasła roota?", a: "Nie, wymaga hasła tego użytkownika", w: ["Tak, zawsze wymaga hasła roota", "Nie, nie wymaga żadnego hasła", "Tak, chyba że użytkownik jest w grupie wheel"] },
        { c: "Zarządzanie kontami", q: "Plik /etc/group zawiera:", a: "Informacje o grupach i ich członkach", w: ["Hasła do grup systemowych", "Listę grup uprawnionych do sudo", "Przypisanie procesów do grup"] },

        // --- CZĘŚĆ 2: Pakiety, Zasoby, Logi ---
        { c: "Oprogramowanie", q: "Który menedżer pakietów automatycznie rozwiązuje zależności?", a: "dnf", w: ["rpm", "dpkg", "tar"] },
        { c: "Oprogramowanie", q: "Co robi polecenie 'rpm -qa'?", a: "Wyświetla listę wszystkich zainstalowanych pakietów", w: ["Aktualizuje wszystkie pakiety", "Sprawdza spójność wszystkich pakietów", "Odpytuje repozytorium o dostępne pakiety"] },
        { c: "Oprogramowanie", q: "Gdzie konfiguruje się automatyczne aktualizacje?", a: "/etc/dnf/automatic.conf", w: ["/etc/yum.repos.d/auto.repo", "/etc/sysconfig/dnf-update", "/var/lib/dnf/automatic"] },
        { c: "Quota (Limity)", q: "Jaką opcję trzeba dodać w /etc/fstab, aby włączyć quotę?", a: "usrquota", w: ["quota=on", "limit", "enforce_quota"] },
        { c: "Quota (Limity)", q: "Komenda do tworzenia bazy plików quoty to:", a: "quotacheck -afm", w: ["quotaon -a", "edquota -init", "mkquota -all"] },
        { c: "Quota (Limity)", q: "Jaka jest różnica między limitem 'soft' a 'hard'?", a: "Soft to ostrzeżenie, Hard to nieprzekraczalna granica", w: ["Soft dotyczy plików, Hard dotyczy bloków dysku", "Soft jest dla użytkowników, Hard dla roota", "Soft można przekroczyć na zawsze, Hard tylko na 7 dni"] },
        { c: "Limity PAM", q: "Gdzie ustawia się limity procesów (nproc) dla użytkowników?", a: "/etc/security/limits.conf", w: ["/etc/systemd/system.conf", "/etc/pam.d/limits", "/proc/sys/kernel/limits"] },
        { c: "Monitorowanie", q: "Komenda 'free -m' pokazuje:", a: "Użycie pamięci RAM i Swap w MB", w: ["Wolne miejsce na dyskach w MB", "Obciążenie procesora w minutach", "Liczbę wolnych inodów"] },
        { c: "Monitorowanie", q: "Która komenda pokazuje zajętość katalogów?", a: "du", w: ["df", "ls -s", "fdisk"] },
        { c: "Logwatch", q: "Co robi program logwatch?", a: "Analizuje logi i wysyła raport mailem", w: ["Monitoruje logi w czasie rzeczywistym (jak tail -f)", "Automatycznie usuwa stare logi", "Szyfruje logi systemowe"] },
        { c: "Cron", q: "Co oznacza wpis '*/5 * * * *' w crontab?", a: "Wykonuj co 5 minut", w: ["Wykonuj codziennie o 5:00", "Wykonuj 5 razy dziennie", "Wykonuj 5-go dnia każdego miesiąca"] },
        { c: "Cron", q: "Kolejność pól w crontab (użytkownika) to:", a: "Minuta, Godzina, Dzień m-ca, Miesiąc, Dzień tyg., Komenda", w: ["Godzina, Minuta, Sekunda, Dzień, Komenda", "Dzień tyg., Miesiąc, Dzień m-ca, Godzina, Minuta", "Komenda, Minuta, Godzina, Dzień, Miesiąc"] },
        { c: "Kopie zapasowe", q: "Dlaczego rsync jest wydajny?", a: "Przesyła tylko różnice w plikach (deltę)", w: ["Domyślnie kompresuje pliki do formatu .tar.gz", "Używa protokołu UDP zamiast TCP", "Pomija pliki systemowe i ukryte"] },
        { c: "Kopie zapasowe", q: "Jaką flagę rsync użyć, aby usunąć pliki w celu (mirror)?", a: "--delete", w: ["--remove-source-files", "--clean", "--mirror"] },
        { c: "Oprogramowanie", q: "Niskopoziomowy menedżer pakietów to:", a: "rpm", w: ["dnf", "yum", "repoquery"] },

        // --- CZĘŚĆ 3: Sieć, Nmap, SSH ---
        { c: "Porty sieciowe", q: "Zakres portów uprzywilejowanych (well-known) to:", a: "0 - 1023", w: ["1024 - 49151", "0 - 100", "49152 - 65535"] },
        { c: "Porty sieciowe", q: "Porty efemeryczne (klienta) to zakres:", a: "49152 - 65535", w: ["1024 - 49151", "0 - 1023", "8080 - 65535"] },
        { c: "Nmap", q: "Do czego służy program nmap?", a: "Do skanowania sieci i wykrywania otwartych portów", w: ["Do mapowania dysków sieciowych", "Do zarządzania tablicą routingu", "Do monitorowania przepustowości łącza"] },
        { c: "Nmap", q: "Jaką flagą nmap skanuje porty UDP?", a: "-sU", w: ["-sT", "-u", "-UDP"] },
        { c: "Nmap", q: "Co robi opcja nmap -A?", a: "Zaawansowana detekcja (OS, wersje usług)", w: ["Skanowanie wszystkich portów (All)", "Skanowanie anonimowe (Anonymous)", "Skanowanie agresywne (Aggressive - tylko prędkość)"] },
        { c: "Monitorowanie sieci", q: "Narzędzie graficzne (w konsoli) do monitorowania ruchu sieciowego to:", a: "iptraf-ng", w: ["wireshark-cli", "netstat -g", "top-net"] },
        { c: "Monitorowanie sieci", q: "Co robi komenda 'ss -t'?", a: "Wyświetla połączenia TCP", w: ["Wyświetla czas (time)", "Testuje połączenie", "Wyświetla tablicę routingu"] },
        { c: "Monitorowanie sieci", q: "Flaga '-p' w netstat/ss pokazuje:", a: "PID procesu obsługującego połączenie", w: ["Protokół (protocol)", "Port (port number)", "Program (program name)"] },
        { c: "Bezpieczeństwo SSH", q: "Jak zablokować logowanie roota przez SSH?", a: "PermitRootLogin no", w: ["BlockRoot yes", "DenyRootAccess on", "RootLogin disabled"] },
        { c: "Bezpieczeństwo SSH", q: "W jakim pliku konfiguruje się demona SSH?", a: "/etc/ssh/sshd_config", w: ["/etc/ssh/ssh_config", "/home/root/.ssh/config", "/etc/sshd.conf"] },
        { c: "Bezpieczeństwo", q: "Co robi 'su -' po zablokowaniu logowania roota przez SSH?", a: "Pozwala podnieść uprawnienia po zalogowaniu jako zwykły użytkownik", w: ["Jest zablokowane i nie zadziała", "Wymaga dodatkowego hasła jednorazowego", "Działa tylko w trybie single-user"] },
        { c: "Kopie zapasowe", q: "Które narzędzia używają szyfrowania SSH?", a: "scp i sftp", w: ["ftp i tftp", "rcp i rsync (bez flag)", "telnet i nc"] },
        { c: "Porty sieciowe", q: "Dla kogo zarezerwowane są porty 1024-49151?", a: "Zarejestrowane (aplikacje, bazy danych)", w: ["Dla usług systemowych (SSH, HTTP)", "Dla klientów nawiązujących połączenie", "Nie są używane (rezerwa)"] },
        { c: "Nmap", q: "Flaga -p w nmap służy do:", a: "Określenia zakresu portów", w: ["Włączenia pingowania", "Włączenia trybu pasywnego", "Pokazania pakietów"] },
        { c: "Monitorowanie sieci", q: "Nowoczesny zamiennik dla netstat to:", a: "ss", w: ["ns", "iproute", "socketstat"] },

        // --- CZĘŚĆ 4: Bezpieczeństwo, FTP, Apache ---
        { c: "Bezpieczeństwo", q: "Do czego służy moduł pam_faillock?", a: "Blokuje konto po nieudanych próbach logowania", w: ["Blokuje dostęp do uszkodzonych plików", "Zarządza blokadami plików (file locks)", "Zapobiega awariom systemu (fail-safe)"] },
        { c: "Bezpieczeństwo", q: "Jak odblokować konto zablokowane przez faillock?", a: "faillock --user [login] --reset", w: ["passwd -u [login]", "usermod -U [login]", "pam_tally2 --reset"] },
        { c: "Bezpieczeństwo AIDE", q: "Co robi system AIDE?", a: "Sprawdza integralność plików (sumy kontrolne)", w: ["Skanuje system pod kątem wirusów", "Wykrywa ataki sieciowe w czasie rzeczywistym", "Tworzy automatyczne kopie zapasowe konfiguracji"] },
        { c: "Bezpieczeństwo Root", q: "Jak całkowicie zablokować shella dla roota?", a: "Zmienić powłokę na /sbin/nologin w /etc/passwd", w: ["Usunąć użytkownika root z systemu", "Zmienić hasło roota na puste", "Usunąć katalog /root"] },
        { c: "Bezpieczeństwo Boot", q: "Jak zabezpieczyć tryb single-user?", a: "Hasło na bootloader (GRUB) i BIOS", w: ["Zablokować porty USB fizycznie", "Odłączyć klawiaturę podczas startu", "Usunąć opcję single-user z kernela"] },
        { c: "FTP", q: "Czy FTP jest bezpieczny?", a: "Nie, przesyła hasła jawnym tekstem", w: ["Tak, ale tylko w trybie pasywnym", "Tak, jeśli używamy silnych haseł", "Nie, ponieważ jest wolny"] },
        { c: "FTP", q: "Jak ukryć wersję serwera vsftpd?", a: "Ustawić ftpd_banner w konfiguracji", w: ["Usunąć plik 'version' z katalogu FTP", "Zmienić uprawnienia pliku wykonywalnego", "Nie da się, protokół tego wymaga"] },
        { c: "FTP", q: "Bezpieczny anonimowy upload (wrzutnia) wymaga:", a: "Prawa zapisu i wykonania, ale BRAK odczytu", w: ["Prawa zapisu i odczytu (777)", "Tylko prawa odczytu", "Prawa zapisu tylko dla grupy root"] },
        { c: "Apache", q: "Dlaczego opcja Indexes jest niebezpieczna?", a: "Wyświetla listę plików w katalogu przy braku index.html", w: ["Pozwala na wykonywanie skryptów CGI", "Umożliwia podążanie za linkami symbolicznymi", "Ujawnia wersję serwera w nagłówkach"] },
        { c: "Apache", q: "Co robi opcja FollowSymlinks?", a: "Pozwala podążać za dowiązaniami (ryzyko wyjścia poza root www)", w: ["Automatycznie indeksuje pliki", "Tworzy skróty do popularnych stron", "Przekierowuje ruch na HTTPS"] },
        { c: "Apache", q: "Jaka dyrektywa ukrywa wersję serwera w nagłówkach?", a: "ServerTokens Prod", w: ["ServerSignature Off", "HideVersion True", "SecurityHeader Min"] },
        { c: "Firewalld", q: "Firewalld opiera się na:", a: "Strefach (zones)", w: ["Łańcuchach (chains - iptables)", "Listach kontroli dostępu (ACL)", "Tabelach routingu"] },
        { c: "Fail2ban", q: "Jak działa Fail2ban?", a: "Analizuje logi i blokuje IP w firewallu", w: ["Działa jako proxy przed serwerem", "Jest modułem jądra do ochrony pamięci", "Skanuje pliki przesyłane przez FTP"] },
        { c: "Bezpieczeństwo AIDE", q: "Gdzie należy trzymać bazę wzorcową AIDE?", a: "Na nośniku tylko do odczytu", w: ["W katalogu /tmp dla szybkiego dostępu", "Na partycji systemowej /boot", "W chmurze publicznej"] },
        { c: "Bezpieczeństwo", q: "Czym grozi brak limitów nproc (procesów)?", a: "Atakiem typu Fork Bomb", w: ["Przepełnieniem dysku logami", "Przechwyceniem sesji SSH", "Atakiem Man-in-the-Middle"] },

        // --- CZĘŚĆ 5: HARD MODE - Detale i Flagi ---
        { c: "Sprzęt (HARD)", q: "Jaka komenda wyświetla informacje o procesorze?", a: "lscpu", w: ["cpuinfo", "proc-cpu", "cat /proc/cpu"] },
        { c: "Sprzęt (HARD)", q: "Jaka komenda listuje urządzenia USB?", a: "lsusb", w: ["usbview", "showusb", "list-usb"] },
        { c: "Oprogramowanie (HARD)", q: "Jaka flaga rpm służy do instalacji pakietu?", a: "-i (install)", w: ["-a (add)", "-p (package)", "-n (new)"] },
        { c: "Oprogramowanie (HARD)", q: "Jaka flaga rpm służy do odinstalowania pakietu?", a: "-e (erase)", w: ["-r (remove)", "-d (delete)", "-u (uninstall)"] },
        { c: "Skrypty (HARD)", q: "Co robił skrypt 'nu' omawiany na wykładzie?", a: "Tworzył konto z hasłem generowanym przez apg", w: ["Usuwał nieaktywnych użytkowników", "Monitorował zużycie dysku (New Usage)", "Aktualizował system (New Update)"] },
        { c: "Skrypty (HARD)", q: "Jaki program był użyty w skrypcie 'nu' do haseł?", a: "apg", w: ["pwgen", "openssl", "random"] },
        { c: "Skrypty (HARD)", q: "Co robił skrypt 'search' z wykładu?", a: "Przeszukiwał bazę kont użytkowników", w: ["Szukał pakietów w repozytorium", "Szukał plików z uprawnieniami SUID", "Przeszukiwał logi systemowe"] },
        { c: "Monitorowanie (HARD)", q: "Jaką flagą netstat/ss wymusić adresy numeryczne (zamiast DNS)?", a: "-n", w: ["-i (ip)", "-d (digits)", "-r (raw)"] },
        { c: "Pliki (HARD)", q: "Do czego służy plik /etc/gshadow?", a: "Zawiera hasła grup i administratorów grup", w: ["Jest kopią zapasową /etc/group", "Zawiera zaszyfrowane nazwy grup", "Przechowuje historię zmian w grupach"] },
        { c: "Bezpieczeństwo (HARD)", q: "Jaka komenda sprawdza bazę AIDE (porównuje)?", a: "aide --check", w: ["aide --verify", "aide --scan", "aide --diff"] },
        { c: "Auto-Update (HARD)", q: "Jaka komenda włącza timer aktualizacji?", a: "systemctl enable --now dnf-automatic.timer", w: ["systemctl start dnf-update", "dnf automatic --enable", "service update start"] },
        { c: "Quota (HARD)", q: "Co oznacza flaga -m w 'quotacheck -afm'?", a: "Nie remontuj systemu plików (no-remount)", w: ["Wymuś sprawdzenie (mandatory)", "Tryb ręczny (manual)", "Zamontuj ponownie (mount)"] },
        { c: "Quota (HARD)", q: "Co oznacza flaga -f w 'quotacheck -afm'?", a: "Wymuś sprawdzenie (force)", w: ["Napraw błędy (fix)", "Szybkie sprawdzanie (fast)", "Tylko pliki (files)"] },
        { c: "Bootloader (HARD)", q: "Narzędzie do ustawienia hasła GRUB2 to:", a: "grub2-setpassword", w: ["grub-passwd", "secure-grub", "grub2-mkconfig --password"] },
        { c: "Porty (HARD)", q: "Port 22 to domyślnie:", a: "SSH", w: ["FTP (21)", "Telnet (23)", "SMTP (25)"] },
        { c: "Porty (HARD)", q: "Port 80 to domyślnie:", a: "HTTP (WWW)", w: ["HTTPS (443)", "DNS (53)", "SQL (3306)"] },
        { c: "Zmienne (HARD)", q: "Jak w skrypcie odwołać się do drugiego argumentu?", a: "$2", w: ["$arg2", "#2", "$vars[1]"] },
        { c: "Nmap (HARD)", q: "Jaka flaga nmap służy do pełnego skanowania TCP (connect)?", a: "-sT", w: ["-TCP", "-c", "-sC"] },
        { c: "Kopie (HARD)", q: "Co robi flaga -e w 'rsync -e ssh'?", a: "Określa zewnętrzny program powłoki (tu: ssh)", w: ["Szyfruje dane (encrypt)", "Włącza tryb edycji (edit)", "Wyklucza pliki (exclude)"] },
        { c: "Monitoring (HARD)", q: "Komenda lspci wyświetla:", a: "Urządzenia na magistrali PCI", w: ["Procesy i ich ID (PID)", "Połączenia internetowe", "Załadowane moduły jądra"] }
    ];

    let currentQuestions = [];
    let currentQuestionIndex = 0;
    let score = 0;

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function startQuiz(startIndex, endIndex) {
        const sliced = allQuestions.slice(startIndex, endIndex);
        currentQuestions = shuffleArray([...sliced]);
        
        currentQuestionIndex = 0;
        score = 0;
        
        document.getElementById('menu-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'block';
        
        showQuestion();
    }

    function showMenu() {
        document.getElementById('menu-screen').style.display = 'block';
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'none';
    }

    function showQuestion() {
        const qData = currentQuestions[currentQuestionIndex];
        
        document.getElementById('category').innerText = qData.c;
        document.getElementById('question').innerText = qData.q;
        document.getElementById('progress').innerText = `Pytanie ${currentQuestionIndex + 1} z ${currentQuestions.length}`;
        document.getElementById('score').innerText = `Punkty: ${score}`;
        
        const optionsContainer = document.getElementById('options-container');
        optionsContainer.innerHTML = '';
        document.getElementById('next-btn').style.display = 'none';

        let wrongAnswers = Array.isArray(qData.w) ? qData.w : ["Błąd 1", "Błąd 2", "Błąd 3"];
        
        let options = [
            { text: qData.a, correct: true },
            { text: wrongAnswers[0], correct: false },
            { text: wrongAnswers[1], correct: false },
            { text: wrongAnswers[2], correct: false }
        ];

        options = shuffleArray(options);

        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.innerText = opt.text;
            btn.classList.add('option-btn');
            btn.onclick = () => selectAnswer(btn, opt.correct);
            optionsContainer.appendChild(btn);
        });
    }

    function selectAnswer(btn, isCorrect) {
        const buttons = document.querySelectorAll('.option-btn');
        buttons.forEach(b => b.disabled = true); 

        if (isCorrect) {
            btn.classList.add('correct');
            score++;
        } else {
            btn.classList.add('wrong');
            buttons.forEach(b => {
                if (b.innerText === currentQuestions[currentQuestionIndex].a) {
                    b.classList.add('correct');
                }
            });
        }
        
        document.getElementById('score').innerText = `Punkty: ${score}`;
        document.getElementById('next-btn').style.display = 'inline-block';
    }

    function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < currentQuestions.length) {
            showQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        
        const percentage = Math.round((score / currentQuestions.length) * 100);
        document.getElementById('final-score').innerText = `${percentage}%`;
        
        let text = "";
        if(percentage === 100) text = "Perfekcyjnie! Jesteś gotowy na egzamin.";
        else if(percentage >= 80) text = "Bardzo dobry wynik! Detale masz opanowane.";
        else if(percentage >= 50) text = "Nieźle, ale powtórz sekcję HARD.";
        else text = "Wróć do notatek i spróbuj ponownie.";
        
        document.getElementById('score-text').innerText = text;
    }
</script>

</body>
</html>